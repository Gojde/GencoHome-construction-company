(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[13,18],{"2DC1":function(e,t,n){},"3a4a":function(e,t,n){},CRTt:function(e,t,n){"use strict";var a=n("q1tI"),r=n.n(a),o=n("9/5/"),i=n.n(o),s=(n("okv/"),n("7Fvy"));t.a=Object(s.componentWillAppendToBody)((function(e){var t=e.offset,n=e.onClose,o=e.children,s=e.className,c=e.initialPosition,l=e.divElement,u=Object(a.useState)()[1],d=i()(u,5),m=r.a.createRef(),v=function(e){var t=m.current;t&&e.target&&(t.contains(e.target)||n())},f=function(e){27===e.keyCode&&n()};Object(a.useEffect)((function(){return window.addEventListener("mousedown",v),window.addEventListener("resize",d),window.addEventListener("scroll",d),window.addEventListener("keydown",f),function(){window.removeEventListener("resize",d),window.removeEventListener("scroll",d),window.removeEventListener("mousedown",v),window.removeEventListener("keydown",f)}}),[]);var g,b={top:0,right:0},p=l?l.current?l.current.getBoundingClientRect():l.getBoundingClientRect():{height:0,width:0};return g=c&&0===p.height&&0===p.width?c:p,b.top=g.top+t.top,b.left=g.right+t.right,r.a.createElement("div",{className:"floating "+(s||""),style:b},r.a.createElement("div",{className:"floating-container",ref:m},o))}))},EK3g:function(e,t,n){},FLa1:function(e,t,n){"use strict";n.d(t,"b",(function(){return g})),n.d(t,"c",(function(){return y})),n.d(t,"a",(function(){return h}));var a=n("q1tI"),r=n.n(a),o=n("bV4Q"),i=n("0dmp"),s=n("gWaq"),c=n("1EDo"),l=n("E/32"),u=n("+sve"),d=n("2oXT"),m=n("1oGN"),v=n("/MKj"),f=n("pxgQ"),g="MoveCopyPins",b=function(e){var t=e.pins,n=e.success,a=e.cancel,i=e.buttonRef,s=e.mutate,b=e.sourceBoardID,p=e.action,E=Object(v.d)();return r.a.createElement(o.b,{buttonRef:i,onClose:a,saveTo:function(e){s&&s({variables:{IDs:t,SourceBoardID:b,DestinationBoardID:e.ID}}).then((function(){var a=Object(l.t)(e.Title,m.a.TOAST_TRUNCATE_LENGTH),o=t.length+" pin"+(t.length>1?"s":"")+" "+("copy"===p?"copied":"moved")+' to "'+a+'"',i=r.a.createElement(c.a,{message:o,icon:r.a.createElement(u.q,null),linkUrl:Object(l.d)(e.URLSegment),className:"addToDesignBoard"});Object(l.c)(i,{className:"addToDesign"},l.b.Success),E(Object(f.e)()),n()})).catch((function(e){var t=Object(d.a)(e);t?Object(l.c)(t,null,l.b.UserError):console.error(e),a()}))},currentBoardID:b,title:"Choose board",pageType:g})},p=Object(i.a)(s.w,{options:{update:s.I,refetchQueries:[{query:s.l},{query:s.t}]}}),E=Object(i.a)(s.b,{options:{update:s.C,refetchQueries:[{query:s.l},{query:s.t}]}}),y=p(b),h=E(b)},LL0X:function(e,t,n){var a=n("3a4a");"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0};n("aET+")(a,r);a.locals&&(e.exports=a.locals)},ReXy:function(e,t,n){},ZTZW:function(e,t,n){"use strict";n.r(t),function(e){n.d(t,"callAddToDesignBoardToast",(function(){return S}));n("zKZe"),n("u5mj");var a=n("q1tI"),r=n.n(a),o=n("bV4Q"),i=n("0dmp"),s=n("gWaq"),c=n("1EDo"),l=n("+sve"),u=n("E/32"),d=n("2oXT"),m=n("yQYZ"),v=n("RG0c"),f=n("c3mq"),g=n("PTuc"),b=n("xCGk"),p=n("/MKj"),E=n("pxgQ"),y=function(t){var n=t.userError;return r.a.createElement(f.a,{query:s.l,fetchPolicy:"cache-and-network",skip:e.IS_SERVERSIDE,ssr:!1},(function(e){var t=e.data,a=e.error;if(!t)return null;if(a)return null;var o=t.DesignBoards;return r.a.createElement(c.a,{message:n,icon:r.a.createElement(l.q,null),linkUrl:o&&o.length>0&&o[0].URLSegment?Object(u.d)(o[0].URLSegment):"/design-boards",className:"addToDesignBoard"})}))},h=Object(i.a)(s.e,{options:{update:s.E,refetchQueries:[{query:s.l},{query:s.t}]}});t.default=Object(p.b)((function(){return{}}),(function(e){return{toggleEnquiryModal:function(t,n,a){e(Object(g.i)(t,n,a))}}}))(Object(m.b)(h((function(e){var t=e.pageID,n=e.buttonRef,i=e.pageType,s=e.onClose,c=e.onSave,l=e.mutate,m=e.userData,f=e.className,g=e.initialPosition,h=e.directSaveToBoard,T=e.toggleEnquiryModal,C=e.trackingCustomData,D=Object(p.d)();Object(a.useEffect)((function(){return document.body.classList.add("ReactModalOpen"),function(){document.body.classList.remove("ReactModalOpen")}}),[]);var I=function(e){void 0===e&&(e=null);var a={PinInput:{Type:i,TypeID:t,DesignBoardID:e&&e.ID||null}};if(n&&!n.classList.contains("alreadySavedToDesignBoard")&&n.classList.add("alreadySavedToDesignBoard"),n&&n.getElementsByClassName("notSaved"))for(var o=n.getElementsByClassName("notSaved"),f=0;f<o.length;f++)o[f]&&o[f].classList&&(o[f].classList.add("alreadySaved"),o[f].classList.remove("notSaved"));c&&c(),l&&l({variables:a}).then((function(n){var a=n.data;if(a&&a.createPin){var r=a.createPin;v.a.log("SaveSubmit",null,Object.assign(C||{},{LibraryItemID:t}),r&&r.ProfessionalTitle),S(e||a.createPin);var o=m&&m.ABTests&&m.ABTests["enquiry-on-save"]&&m.ABTests["enquiry-on-save"].Value,i=new b.a;i.handleEnquiryABTest(a,o,T),i.setSaveCount(i.getSaveCount()+1),D(Object(E.e)())}})).catch((function(e){var t=Object(d.a)(e);if(t){var n=r.a.createElement(y,{userError:t});Object(u.c)(n,null,u.b.UserError)}})),s()};return h?(I(h),null):m&&m.loggedIn?r.a.createElement(r.a.Fragment,null,r.a.createElement(o.b,{pageTypeID:t,pageType:i,currentBoardID:null,title:"Choose board",saveTo:I,onClose:s,className:f,buttonRef:n,initialPosition:g})):(I(),null)}))));var S=function(e){if(e){var t="DesignBoard"===e.__typename,n='Saved to "'+(t?e.Title:"My first design board")+'"',a=t?e.URLSegment:e.BoardURLSegment,o=r.a.createElement(c.a,{message:n,icon:r.a.createElement(l.q,null),linkUrl:a?Object(u.d)(a):"",className:"addToDesignBoard"});Object(u.c)(o,{className:"addToDesign"},u.b.Notification)}}}.call(this,n("yLpj"))},bV4Q:function(e,t,n){"use strict";n.d(t,"a",(function(){return P}));var a=n("07d7"),r=n.n(a),o=n("5s+n"),i=n.n(o),s=n("q1tI"),c=n.n(s),l=n("EpFV"),u=n("+sve"),d=n("YEbR"),m=n("Xd6/"),v=n("u5mj"),f=n.n(v),g=n("u+Of"),b=n.n(g),p=n("MKeS"),E=n("gWaq"),y=n("c3mq"),h=n("CRTt"),S=n("p+au"),T=n("uUCS"),C=n("FLa1"),D=Object(p.a)({chunkName:function(){return"DesignBoardListMenu"},isReady:function(e){return!!n.m[this.resolve(e)]},requireAsync:function(){return n.e(17).then(n.bind(null,"UXho"))},requireSync:function e(t){var a=this.resolve(t);return n(a)},resolve:function e(){return"UXho"}}),I=function(e){var t=e.pageTypeID,n=e.pageType,a=e.saveTo,r=e.screenSize,o=e.onClose,i=e.currentBoardID,s=e.title,l=e.className,u=e.initialPosition,v=e.buttonRef,f={IDs:t?[t]:[]},g=n&&"PhotoPin"===n?E.j:E.i;return c.a.createElement(y.a,{query:g,variables:f,fetchPolicy:"cache-and-network"},(function(e){var t,f,g=e.data,b=[];return b=n&&"PhotoPin"===n?g&&g.GetLibraryImages&&g.GetLibraryImages.length?g.GetLibraryImages[0].DesignBoardsForCurrentUser:[]:g&&g.GetDirectoryItems&&g.GetDirectoryItems.length?g.GetDirectoryItems[0].DesignBoardsForCurrentUser:[],r===d.a.Mobile?(t=b,f=c.a.createElement("div",{className:"createDesignBoard__button"},c.a.createElement(P,{onCreated:a,onCreateCanceled:o})),c.a.createElement("div",{className:"modalFeedback"},c.a.createElement(m.b,{title:s,onClose:o,footerChild:f,alwaysShowFooter:!0,className:"designBoardListMenu"},c.a.createElement(S.a,{currentBoardID:i,onSave:a,boardsAlreadySavedTo:t})))):function(e){if(!v)return console.error("Tried to display a floating element but position is undefined"),null;var t=-1;return v.offsetTop>0&&n===C.b&&(t=-290-v.offsetTop),c.a.createElement(h.a,{offset:{right:-260,top:t},onClose:o,className:l,initialPosition:u,divElement:v},c.a.createElement(D,{title:s,onClose:o,saveTo:a,boardsAlreadySavedTo:e,currentBoardID:i}))}(b)}))};t.b=Object(l.b)(I,{ssrSize:d.a.Mobile});var P=function(e){var t=e.onCreated,n=e.onCreateCanceled,a=Object(s.useState)(!1),r=a[0],o=a[1];return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"modalFeedback__cta",onClick:function(e){e.stopPropagation(),o(!0)}},c.a.createElement(u.yb,null),c.a.createElement("a",null,"Create new board")),r&&c.a.createElement(T.default,{onClose:n,onCreate:function(e){var n=e.createDesignBoard;n&&t(n)}}))}},"okv/":function(e,t,n){var a=n("2DC1");"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0};n("aET+")(a,r);a.locals&&(e.exports=a.locals)},"p+au":function(e,t,n){"use strict";n("TeQF"),n("2B1R");var a=n("0dmp"),r=n("gWaq"),o=n("q1tI"),i=n.n(o),s=n("+sve"),c=(n("LL0X"),n("ZQcC")),l=function(e){var t=e.title,n=e.isPublic,a=e.onSave,r=e.loading,o=e.isSaved,c=n?i.a.createElement(s.Tb,{className:"iconUnlocked"}):i.a.createElement(s.ib,{className:"iconLocked"});return i.a.createElement("div",{className:"designBoards__boards__item "+(o?"isSaved":""),onClick:function(){!o&&!r&&a()}},i.a.createElement("span",{className:"designBoards__boards__item__icon"},c),i.a.createElement("span",{title:t},t),i.a.createElement("a",{className:"btnMultiSave "+((o||r)&&"btnMultiSave--disabled")},"Save"+(o?"d":"")))},u=Object(a.a)(r.l,{options:function(){return{fetchPolicy:"cache-and-network",errorPolicy:"all",ssr:!1}}});t.a=u((function(e){var t=e.currentBoardID,n=e.onSave,a=e.data,r=e.boardsAlreadySavedTo,s=Object(o.useState)(!1),u=s[0],d=s[1];if(!a)return null;a.error&&console.error(a.error);var m=a.DesignBoardListItems||[],v=m.length>0&&function(e){return e.filter((function(e){return e.ID!==t&&e.Permission.CanAddPins})).map((function(e){for(var t=!1,o=0;o<r.length;o++)if(r[o].ID===e.ID){t=!0;break}return i.a.createElement(l,{key:e.ID,title:e.Title,isPublic:e.Public,onSave:function(){n(e),d(!0),a&&(a.DesignBoardListItems=[])},isSaved:t,loading:u})}))}(m);return i.a.createElement("div",{className:"modalFeedback__content designBoards__boards__list"},i.a.createElement(c.a,{loading:null==a?void 0:a.loading},v))}))},"u+Of":function(e,t,n){var a=n("EK3g");"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0};n("aET+")(a,r);a.locals&&(e.exports=a.locals)},u5mj:function(e,t,n){var a=n("ReXy");"string"==typeof a&&(a=[[e.i,a,""]]);var r={hmr:!0,transform:void 0};n("aET+")(a,r);a.locals&&(e.exports=a.locals)},xCGk:function(e,t,n){"use strict";function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}));var r=function(){function e(){var e=this;a(this,"openEnquiryModal",(function(t,n){var a=[{id:t&&t.createPin&&"MemberUploadPin"!==t.createPin.__typename&&t.createPin.PageTypeID||0,pageType:t&&t.createPin&&"MemberUploadPin"!==t.createPin.__typename&&t.createPin.PageType||"",subtitle:t&&t.createPin&&"MemberUploadPin"!==t.createPin.__typename&&t.createPin.SubTitle||"",tileImage:t&&t.createPin&&t.createPin.PhotoTile||"",title:t&&t.createPin&&t.createPin.Title||""}];e.setHasCancelled(!0),n(!0,a,{messagePlaceholder:"I have saved this to my design board on on Archipro.co.nz and I would like to receive more information."})})),a(this,"handleEnquiryABTest",(function(t,n,a){switch(n){case"A":break;case"B":e.getHasCancelled()||e.openEnquiryModal(t,a);break;case"C":e.getSaveCount()>=1&&!e.getHasCancelled()&&e.openEnquiryModal(t,a)}}))}var t=e.prototype;return t.setHasCancelled=function(e){return!!sessionStorage&&sessionStorage.setItem("EnquiryCancelled",e)},t.getHasCancelled=function(){return!!sessionStorage&&"true"===sessionStorage.getItem("EnquiryCancelled")},t.setSaveCount=function(e){return localStorage.setItem("PinSaveCount",e)},t.getSaveCount=function(){return localStorage?parseInt(localStorage.getItem("PinSaveCount")||"0"):1},e}()}}]);